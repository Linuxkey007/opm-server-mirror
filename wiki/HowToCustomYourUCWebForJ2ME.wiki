#summary 如何修改Java（J2ME）版的UCWeb

依照项目Wiki页，搭建UCWeb的代理，GAE的Java版或PHP版，方法基本上跟Opera Mini一样，改进过的服务端是直接返回服务器IP，并非中转，所以不挑IP，不检测语言标识，不转发隐私信息如手机的imei到ucweb官方（直接丢弃掉）。
    * 对PHP空间无特别要求，不需curl支持。
    * GAE的Java上传方法同operamini。

假设代理地址为
{{{
http://application-id.appspot.com/ucweb
}}}
    
然后就修改ucweb的jar文件，用压缩工具解压UCWeb的jar文件，这里还是用[http://classeditor.sourceforge.net/ Java Class File Editor]，简称ce，是java程序，也可用其它类似工具，修改信息如下面表格

|| *版本* || *测试文件* || *class文件* (注1) || *域名部分* || *地址部分* (注2) ||
|| 6.7 || [http://wap.ucweb.com/ucpack/filepack/999/71/UCWEB-6.7.0.32-999-71-09102211.jar UCWEB-6.7.0.32-999-71-09102211.jar] || q.class || uc.ucweb.com:18075 || /?ucid ||
|| 7.0 || [http://wap.uc.cn/ucpack/filepack/999/69/UCWEB-7.0.3.39-999-69-10011919.jar UCWEB-7.0.3.39-999-69-10011919.jar] || am.class || uc.ucweb.com:80 || /?dataver ||
|| 7.1 || [http://wap.ucweb.com/ucpack/filepack/999/69/UCWEB-7.1.0.42-999-69-10012818.jar UCWEB-7.1.0.42-999-69-10012818.jar] || al.class || 同上 || 同上 ||
|| 7.2 || [http://wap.ucweb.com/ucpack/filepack/999/69/UCWEB-7.2.0.46-999-69-10033015.jar UCWEB-7.2.0.46-999-69-10033015.jar] || al.class || 同上 || 同上 ||

*注1*: 因为UCWeb的代码混淆过，所以每个版本的要修改的class文件都不同，包含“m_bid”字符串的class即是要修改的文件，Linux用户可以用grep命令来搜索，至于windows用户请自己找类似的工具。
{{{
grep m_bid ./*.class
}}}

*注2*: 地址部分应该查找“/”的，但查找“/”结果太多了，不容易定位，所以这里改用长一点的字符串。

    # 运行ce，打开表格中的*class文件*。
    # 点击右上角的按钮，切换成“Modify Mode(on)”
    # 切换到“Constant Pool”选项卡，右边区域里“Filter”选“Utf8“，点击“Apply”。
    # 查找表格中的*域名部分*字符串，改成代理地址的域名，如“application-id.appspot.com”。
    # 再把上方列表的滚动条拖到顶部，以便从头查找。
    # 查找表格中的*地址部分*字符串，注意这里要改的是查找结果条目*上面那个“/”条目*，把“/”改成“/ucweb”。
    # 保存修改结果，把修改后的class，打包回jar（拉进原来的jar覆盖即可）。